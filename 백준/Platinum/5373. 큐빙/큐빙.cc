#include<bits/stdc++.h>
using namespace std;

string a="wwwwwwwwwrrrrrrrrrbbbbbbbbbooooooooogggggggggyyyyyyyyy";
string b;

void r(int x, int y, int z, int w)
{
	swap(b[x], b[y]);
	swap(b[w], b[x]);
	swap(b[z], b[w]);
}

int main()
{
	int t, n;
	cin>>t;
	while(t--)
	{
		b=a;
		cin>>n;
		while(n--)
		{
			string s;
			cin>>s;
			if(s=="U+")
			{
				r(0, 2, 8, 6);r(1, 5, 7, 3);r(9, 36, 27, 18);r(10, 37, 28, 19);r(11, 38, 29, 20);
			}
			if(s=="U-")
			{
				r(0, 6, 8, 2);r(1, 3, 7, 5);r(9, 18, 27, 36);r(10, 19, 28, 37);r(11, 20, 29, 38);
			}
			if(s=="D+")
			{
				r(45, 47, 53, 51);r(46, 50, 52, 48);r(15, 24, 33, 42);r(16, 25, 34, 43);r(17, 26, 35, 44);
			}
			if(s=="D-")
			{
				r(45, 51, 53, 47);r(46, 48, 52, 50);r(15, 42, 33, 24);r(16, 43, 34, 25);r(17, 44, 35, 26);
			}
			if(s=="F+")
			{
				r(9, 11, 17, 15);r(10, 14, 16, 12);r(6, 18, 47, 44);r(7, 21, 46, 41);r(8, 24, 45, 38);
			}
			if(s=="F-")
			{
				r(9, 15, 17, 11);r(10, 12, 16, 14);r(6, 44, 47, 18);r(7, 41, 46, 21);r(8, 38, 45, 24);
			}
			if(s=="R+")
			{
				r(18, 20, 26, 24);r(19, 23, 25, 21);r(8, 27, 53, 17);r(5, 30, 50, 14);r(2, 33, 47, 11);
			}
			if(s=="R-")
			{
				r(18, 24, 26, 20);r(19, 21, 25, 23);r(8, 17, 53, 27);r(5, 14, 50, 30);r(2, 11, 47, 33);
			}
			if(s=="B+")
			{
				r(27, 29, 35, 33);r(28, 32, 34, 30);r(0, 42, 53, 20);r(1, 39, 52, 23);r(2, 36, 51, 26);
			}
			if(s=="B-")
			{
				r(27, 33, 35, 29);r(28, 30, 34, 32);r(0, 20, 53, 42);r(1, 23, 52, 39);r(2, 26, 51, 36);
			}
			if(s=="L+")
			{
				r(36, 38, 44, 42);r(37, 41, 43, 39);r(0, 9, 45, 35);r(3, 12, 48, 32);r(6, 15, 51, 29);
			}
			if(s=="L-")
			{
				r(36, 42, 44, 38);r(37, 39, 43, 41);r(0, 35, 45, 9);r(3, 32, 48, 12);r(6, 29, 51, 15);
			}
		}
		for(int i=0;i<3;i++)
		{
			for(int j=0;j<3;j++)
			{
				cout<<b[i*3+j];
			}
			cout<<"\n";
		}
	}
}